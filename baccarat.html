<!DOCTYPE HTML>
<html>
  <head>
    <title>FPGA Baccarat — Yassin Abulnaga</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
  </head>
  <body class="is-preload">
    <div id="wrapper" class="fade-in">

      <!-- Header -->
      <header id="header">
        <a href="index.html" class="logo">About</a>
      </header>

      <!-- Nav -->
      <nav id="nav">
        <ul class="links">
          <li><a href="index.html">Home</a></li>
          <li><a href="resume.html">Resume</a></li>
          <li><a href="risc-cpu.html">RISC CPU</a></li>
          <li class="active"><a href="baccarat.html">FPGA Baccarat</a></li>
          <li><a href="coin-robot.html">Coin Retrieval Robot</a></li>
          <li><a href="reflow-oven.html">Oven Reflow Controller</a></li>
        </ul>
        <ul class="icons">
          <li><a href="https://www.linkedin.com/in/yassinabulnaga/" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
          <li><a href="https://github.com/yassinabulnaga" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
        </ul>
      </nav>

      <!-- Main -->
      <div id="main">
        <section class="post">
          <header class="major">
            <h1>FPGA Baccarat</h1>
          </header>

          <!-- Abstract -->
          <h2>Abstract</h2>
          <p>
            A digital Baccarat engine implemented in SystemVerilog on the <strong>DE1-SoC</strong>. 
            The design combines a simple datapath with a finite-state machine controller to deal cards, compute hand scores (mod&nbsp;10), and display results on HEX displays and LEDs. 
            The project showcases RTL design, module-level verification in ModelSim, and on-board validation in Quartus.
          </p>
          <p style="text-align:center;">
            <img src="images/baccarat-fpga.jpg" alt="FPGA Baccarat running on DE1-SoC" style="max-width: 900px; width:100%; height:auto;" />
          </p>

          <!-- Goals -->
          <h2>Goals</h2>
          <ul>
            <li>Design a clean <em>datapath + controller</em> architecture for a casino-style Baccarat game.</li>
            <li>Drive <strong>HEX0–HEX5</strong> with card values and <strong>LEDR</strong> with scores/win indicators.</li>
            <li>Write self-checking testbenches and perform post-synthesis checks.</li>
            <li>Deploy to DE1-SoC and verify real-time operation with push-button inputs.</li>
          </ul>

          <!-- System Design -->
          <h2>System Design</h2>
          <p>
            The hardware is split into a datapath that stores cards and computes scores, and a controller FSM that sequences the game per Punto Banco rules. 
            User presses <code>KEY0</code> (slow_clock) to step through the game; <code>KEY3</code> is a synchronous active-low reset.
          </p>

          <h3>Modules</h3>
          <ul>
            <li><strong>dealcard.sv</strong> — Free-running counter on 50&nbsp;MHz clocks through 1..13; sampled on user step to emulate randomness.</li>
            <li><strong>reg4.sv</strong> — 4-bit registers hold <em>player</em> and <em>banker</em> cards (0 = no card).</li>
            <li><strong>card7seg.sv</strong> — Combinational 4-bit→7-seg encoder (A, 2..9, 0, J, q, H; blank for 0/14/15). Active-low HEX.</li>
            <li><strong>scorehand.sv</strong> — Maps face cards (10/J/Q/K) to 0, sums up to three cards, outputs <code>(sum mod 10)</code>.</li>
            <li><strong>statemachine.sv</strong> — Sequencer for deal order and third-card rules; asserts <code>load_pcard*</code>/<code>load_dcard*</code>.</li>
            <li><strong>datapath.sv</strong> — Wires registers, scoring, and display logic; exposes scores and third-card value to FSM.</li>
            <li><strong>task5.sv</strong> (top) — Toplevel integration for DE1-SoC I/O.</li>
          </ul>

          <p style="text-align:center;">
            <img src="figures/block-diagram.png" alt="Baccarat block diagram" style="max-width: 900px; width:100%; height:auto;" />
            <br/><em>Block diagram: state machine (control) + datapath (storage/compute).</em>
          </p>

          <h3>Interfaces &amp; I/O Mapping</h3>
          <ul>
            <li><strong>Inputs:</strong> <code>CLOCK_50</code> (dealcard), <code>KEY0</code>=slow_clock, <code>KEY3</code>=resetb (sync, active-low).</li>
            <li><strong>Displays:</strong> <code>HEX0..HEX2</code> = Player cards, <code>HEX3..HEX5</code> = Banker cards (active-low).</li>
            <li><strong>LEDs:</strong> <code>LEDR[3:0]</code> = Player score, <code>LEDR[7:4]</code> = Banker score, <code>LEDR[8]</code>=Player win, <code>LEDR[9]</code>=Banker win (both=Tie).</li>
          </ul>

          <!-- Results -->
          <h2>Results</h2>
          <ul>
            <li>Unit testbenches for <code>scorehand</code>, <code>statemachine</code>, and <code>datapath</code> pass (RTL and post-synthesis netlist).</li>
            <li>On-board demo: correct dealing sequence, accurate scores (mod&nbsp;10), and correct third-card behavior.</li>
            <li>HEX accurately shows A/2..9/0/J/q/H; LEDs indicate scores and winner per rules.</li>
            <li>Observed occasional out-of-range sample when pressing slow_clock at metastable moments — expected due to async sampling of the 50&nbsp;MHz counter (documented as a known limitation).</li>
          </ul>

          <!-- Acknowledgments -->
          <h2>Acknowledgments</h2>
          <p>
            Personal project inspired by course materials and the DE1-SoC platform. Thanks to the UBC teaching team for the excellent reference workflows.
          </p>

        </section>
      </div>

      <!-- Footer -->
      <footer id="footer">
        <section class="split contact">
          <section class="alt"><h3>Address</h3><p>3615 W 17 Ave<br />Vancouver, BC</p></section>
          <section><h3>Phone</h3><p><a href="tel:+12362685455">+1 (236) 268-5455</a></p></section>
          <section><h3>Email</h3><p><a href="mailto:yabulnag@gmail.com">yabulnag@gmail.com</a></p></section>
          <section><h3>Social</h3>
            <ul class="icons alt">
              <li><a href="https://www.linkedin.com/in/yassinabulnaga/" class="icon brands alt fa-linkedin"><span class="label">LinkedIn</span></a></li>
              <li><a href="https://github.com/yassinabulnaga" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
            </ul>
          </section>
        </section>
      </footer>

      <!-- Copyright -->
      <div id="copyright">
        <ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
      </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
