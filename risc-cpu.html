<!DOCTYPE HTML>
<html>
  <head>
    <title>16-bit RISC CPU — Yassin Abulnaga</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
  </head>
  <body class="is-preload">
    <div id="wrapper" class="fade-in">

      <!-- Header -->
      <header id="header">
        <a href="index.html" class="logo">About</a>
      </header>

      <!-- Nav -->
      <nav id="nav">
        <ul class="links">
          <li><a href="index.html">Home</a></li>
          <li><a href="resume.html">Resume</a></li>
          <li class="active"><a href="risc-cpu.html">RISC CPU</a></li>
          <li><a href="baccarat.html">FPGA Baccarat</a></li>
          <li><a href="coin-robot.html">Coin Retrieval Robot</a></li>
          <li><a href="reflow-oven.html">Oven Reflow Controller</a></li>
        </ul>
        <ul class="icons">
          <li><a href="https://www.linkedin.com/in/yassinabulnaga/" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
          <li><a href="https://github.com/yassinabulnaga" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
        </ul>
      </nav>

      <!-- Main -->
      <div id="main">
        <section class="post">
          <header class="major">
            <h1>16-bit RISC CPU</h1>
          </header>

          <!-- Abstract -->
          <h2>Abstract</h2>
          <p>
            I designed and implemented a minimalist 16-bit RISC CPU in SystemVerilog, including a clean
            datapath,FSM controller, an instruction memory with PC &amp; IR,
            and memory-mapped I/O for switches/LEDs. The processor executes an ISA with single-cycle register moves 
            and multi-cycle ALU and memory ops.
          </p>

          <p style="text-align:center;">
            <img src="images/BlockDiagramCpen211.png" alt="SRM CPU block diagram" style="max-width:900px;width:100%;height:auto;" />
            <br/><em>High-level block diagram.</em>
          </p>

          <!-- Goals -->
          <h2>Goals</h2>
          <ul>
            <li>Build a readable, modular CPU: <em>register file, ALU, shifter, pipeline regs, writeback mux</em>.</li>
            <li>Design an FSM controller to sequence instruction execution (fetch → decode → execute → writeback).</li>
            <li>Add instruction memory, program counter, and instruction register for autonomous execution.</li>
            <li>Support memory-mapped I/O (switches as input, red LEDs as output).</li>
            <li>Create self-checking testbenches (unit + top) and validate post-synthesis behavior.</li>
          </ul>

       <!-- System Design -->
<h2>System Design</h2>
<p>
  A 16-bit CPU built around two main components: a <strong>datapath</strong> that performs
  computation and stores intermediate values, and a <strong>controller FSM</strong> that sequences instruction
  execution. Instructions are fetched from on-chip RAM into an instruction register, decoded, and then executed
  by the datapath. Results are written back to memory, with memory-mapped I/O providing
  interaction with switches and LEDs on the DE1-SoC board.
</p>

          <h3>Modules</h3>
<ul>
  <li><strong>Datapath</strong> — Includes the register file (8×16), ALU (ADD, AND, MVN, CMP), shifter (LSL/LSR/ASR#1), pipeline registers (A, B, C, Status), and memory subsystem (instruction RAM, data memory, memory-mapped I/O for switches/LEDs). Handles storage, computation, and I/O.</li>
  <li><strong>Program Counter &amp; Instruction Register</strong> — PC increments each fetch (halts on HALT); IR latches the current instruction for decoding.</li>
  <li><strong>Controller FSM</strong> — Sequencer with states for reset, fetch, decode, and execute, asserting control signals to drive the datapath.</li>
</ul>

<h3>Instruction Set</h3>
<table>
  <thead>
    <tr>
      <th>Instruction</th>
      <th>Meaning</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>MOV Rd,#imm8</code></td>
      <td>Move immediate to register</td>
      <td>Sign-extends 8-bit immediate</td>
    </tr>
    <tr>
      <td><code>MOV Rd,Rm{,shift}</code></td>
      <td>Move register</td>
      <td>Optional LSL/LSR/ASR by 1</td>
    </tr>
    <tr>
      <td><code>ADD Rd,Rn,Rm{,shift}</code></td>
      <td>Add</td>
      <td>Writes result, sets flags</td>
    </tr>
    <tr>
      <td><code>AND Rd,Rn,Rm{,shift}</code></td>
      <td>Bitwise AND</td>
      <td>Writes result, sets flags</td>
    </tr>
    <tr>
      <td><code>MVN Rd,Rm{,shift}</code></td>
      <td>Bitwise NOT</td>
      <td>Writes result, sets flags</td>
    </tr>
    <tr>
      <td><code>CMP Rn,Rm{,shift}</code></td>
      <td>Compare</td>
      <td>Subtracts, updates flags only</td>
    </tr>
    <tr>
      <td><code>LDR Rd,[Rn{,#imm5}]</code></td>
      <td>Load word</td>
      <td>Loads from memory/I/O into register</td>
    </tr>
    <tr>
      <td><code>STR Rd,[Rn{,#imm5}]</code></td>
      <td>Store word</td>
      <td>Stores register into memory/I/O</td>
    </tr>
    <tr>
      <td><code>HALT</code></td>
      <td>Stop execution</td>
      <td>PC freezes, CPU idle</td>
    </tr>
  </tbody>
</table>


          <h3>Verification</h3>
          <ul>
            <li><strong>Unit tests</strong> for regfile, ALU, shifter with self-checking <code>err</code> flags and edge-case coverage.</li>
            <li><strong>CPU tests</strong> exercise fetch/decode, all instruction classes, and multi-cycle sequences.</li>
            <li><strong>Post-synthesis</strong> compilation in Quartus to check for inferred latches/comb loops; timing sanity.</li>
          </ul>

          <!-- Results -->
          <h2>Results</h2>
          <ul>
            <li>CPU successfully runs programs from on-chip RAM; HALT supported.</li>
            <li>All core instructions verified in simulation.</li>
            <li>Stable on hardware (DE1-SoC): correct HEX/LED outputs, deterministic stepping, clean reset/idle behavior.</li>
            <li>Clean synthesis.</li>
          </ul>

          <!-- Optional: Repo / Docs buttons -->
          <!--
          <ul class="actions special">
            <li><a href="https://github.com/your_repo" class="button">View Source</a></li>
            <li><a href="documents/srm_data.txt" class="button">Sample data.txt</a></li>
          </ul>
          -->
        </section>
      </div>

      <!-- Footer -->
      <footer id="footer">
        <section class="split contact">
          <section class="alt"><h3>Address</h3><p>3615 W 17 Ave<br />Vancouver, BC</p></section>
          <section><h3>Phone</h3><p><a href="tel:+12362685455">+1 (236) 268-5455</a></p></section>
          <section><h3>Email</h3><p><a href="mailto:yabulnag@gmail.com">yabulnag@gmail.com</a></p></section>
          <section><h3>Social</h3>
            <ul class="icons alt">
              <li><a href="https://www.linkedin.com/in/yassinabulnaga/" class="icon brands alt fa-linkedin"><span class="label">LinkedIn</span></a></li>
              <li><a href="https://github.com/yassinabulnaga" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
            </ul>
          </section>
        </section>
      </footer>

      <!-- Copyright -->
      <div id="copyright">
        <ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
      </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
